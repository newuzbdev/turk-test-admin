import{r as n,j as t,T as b,B as r,M as x,a as E}from"./index-uUpZomyQ.js";import{u as R,a as v,b as L,c as w}from"./test-query-XPHuE7MP.js";import{C as D,a as M,F as N,S as B,R as z}from"./Table-XGYKetWf.js";import{I as d}from"./index-VUfoB9ds.js";const{Title:G}=b;function A(){const[c,m]=n.useState(1),[p]=n.useState(10),[g,l]=n.useState(!1),[o,u]=n.useState(null),[a,s]=n.useState({title:"",type:"LISTENING",ieltsId:"",parts:[]}),{data:h,isLoading:y}=R(c,p),I=v(),T=L(),f=w(),j=e=>{u(e),s({title:e.title,type:e.type,ieltsId:e.ieltsId,parts:e.parts}),l(!0)},S=e=>{x.confirm({title:"Ishonchingiz komilmi?",content:"Bu testni o'chirishni xohlaysizmi?",okText:"Ha",cancelText:"Yo'q",onOk:()=>f.mutate(e),onCancel:()=>{}})},C=()=>{o?T.mutate({id:o.id,...a}):I.mutate(a),l(!1),u(null),s({title:"",type:"LISTENING",ieltsId:"",parts:[]})},k=[{title:"Test nomi",dataIndex:"title",key:"title",render:e=>t.jsx("span",{style:{fontWeight:500},children:e})},{title:"Turi",dataIndex:"type",key:"type",render:e=>t.jsx("span",{children:e})},{title:"IELTS ID",dataIndex:"ieltsId",key:"ieltsId",render:e=>t.jsx("code",{children:e})},{title:"Amallar",key:"actions",render:(e,i)=>t.jsxs(B,{children:[t.jsx(r,{type:"text",icon:t.jsx(E,{}),onClick:()=>j(i),style:{color:"#1890ff"},children:"Tahrirlash"}),t.jsx(r,{type:"text",danger:!0,icon:t.jsx(z,{}),onClick:()=>S(i.id),children:"O'chirish"})]})}];return t.jsxs(D,{style:{borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.06)",border:"none"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[t.jsx(G,{level:3,children:"Testlar"}),t.jsx(r,{type:"primary",icon:t.jsx(M,{}),size:"large",style:{borderRadius:"8px",borderColor:"#10b981",height:"44px",paddingLeft:"20px",paddingRight:"20px"},onClick:()=>l(!0),children:"Yangi Test Yaratish"})]}),t.jsx(N,{rowKey:"id",loading:y,dataSource:h?.data||[],columns:k,pagination:{current:c,pageSize:p,total:h?.total||0,onChange:m,showSizeChanger:!1,showQuickJumper:!0,showTotal:(e,i)=>`${i[0]}-${i[1]} / ${e} ta test`}}),t.jsxs(x,{title:o?"Testni tahrirlash":"Yangi test yaratish",open:g,onCancel:()=>l(!1),onOk:C,children:[t.jsx(d,{placeholder:"Test nomi",value:a.title,onChange:e=>s({...a,title:e.target.value}),style:{marginBottom:10}}),t.jsx(d,{placeholder:"IELTS ID",value:a.ieltsId,onChange:e=>s({...a,ieltsId:e.target.value}),style:{marginBottom:10}}),t.jsx(d,{placeholder:"Turi (LISTENING/READING)",value:a.type,onChange:e=>s({...a,type:e.target.value})})]})]})}export{A as default};

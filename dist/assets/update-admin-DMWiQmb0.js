import{F as o,am as j,r as c,j as e,$ as m,a2 as g,I as i,R as p,d as u,B as P}from"./index-BCC2Yt1W.js";import{R as y,a as x}from"./UserOutlined-BX7ZL6rn.js";function k(){try{const r=localStorage.getItem("accessToken");if(!r)return null;const a=r.split(".")[1];if(!a)return null;const t=JSON.parse(atob(a));return t.sub??t.id??null}catch{return null}}const{Title:I}=g;function S(){const r=k(),[a]=o.useForm(),t=j(),[l,h]=c.useState(!1),[d,f]=c.useState(!1),w=s=>{if(!r)return;const n={};s.name?.trim()&&(n.name=s.name.trim()),s.oldPassword&&(n.oldPassword=s.oldPassword),s.newPassword&&(n.newPassword=s.newPassword),t.mutate({id:r,...n},{onSuccess:()=>a.resetFields()})};return r?e.jsxs("div",{style:{padding:24},children:[e.jsx(I,{level:2,style:{marginBottom:24},children:"Parolni yangilash"}),e.jsx(m,{style:{maxWidth:480},children:e.jsxs(o,{form:a,layout:"vertical",onFinish:w,size:"large",autoComplete:"off",children:[e.jsx(o.Item,{name:"name",label:"Username",children:e.jsx(i,{prefix:e.jsx(y,{}),placeholder:"Yangi username"})}),e.jsx(o.Item,{name:"oldPassword",label:"Eski parol",rules:[{message:"Parolni o‘zgartirish uchun eski parol kerak",validator:(s,n)=>a.getFieldValue("newPassword")&&!n?Promise.reject(new Error("Eski parol kiritilishi shart")):Promise.resolve()}],children:e.jsx(i,{prefix:e.jsx(x,{}),type:l?"text":"password",placeholder:"Eski parol",suffix:e.jsx("span",{onClick:()=>h(s=>!s),style:{cursor:"pointer"},children:l?e.jsx(p,{}):e.jsx(u,{})})})}),e.jsx(o.Item,{name:"newPassword",label:"Yangi parol",rules:[{min:4,message:"Parol kamida 4 ta belgidan iborat bo‘lishi kerak"}],children:e.jsx(i,{prefix:e.jsx(x,{}),type:d?"text":"password",placeholder:"Yangi parol",suffix:e.jsx("span",{onClick:()=>f(s=>!s),style:{cursor:"pointer"},children:d?e.jsx(p,{}):e.jsx(u,{})})})}),e.jsx(o.Item,{children:e.jsx(P,{type:"primary",htmlType:"submit",loading:t.isPending,block:!0,children:"Yangilash"})})]})})]}):e.jsx("div",{style:{padding:24},children:e.jsx(m,{style:{maxWidth:480},children:e.jsx("p",{children:"Admin ID topilmadi. Tizimga qayta kiring."})})})}export{S as default};

import{N as f,al as o,g as p,e as j,f as F,V as y,r as m,F as d,j as n,a2 as w,$ as P,p as k,M as b,Y as q,B as E}from"./index-BCC2Yt1W.js";const v=()=>f({queryKey:[o.all],queryFn:async()=>{const t=await p.get(o.all);return console.log("[TestCoinPrice] GET",o.all,t),t.data},refetchOnMount:"always",refetchOnWindowFocus:!1,staleTime:0}),A=()=>{const t=j();return F({mutationFn:async s=>{const{id:a,...l}=s;return(await p.patch(o.one(a),l)).data},onSuccess:()=>{t.invalidateQueries({queryKey:[o.all]}),y.success("Coin muvaffaqiyatli yangilandi")},onError:s=>{const a=s?.response?.data?.error||"Coin yangilashda xatolik yuz berdi";y.error(a)}})},{Title:I}=w;function B(){const{data:t,isLoading:s,refetch:a}=v(),{mutate:l,isPending:u}=A(),[i,c]=m.useState(null),[r]=d.useForm(),g=m.useMemo(()=>Array.isArray(t?.data)?t.data:Array.isArray(t)?t:[],[t]),h=[{title:"Test Turi",dataIndex:"testType",key:"testType"},{title:"Coin",dataIndex:"coin",key:"coin",render:e=>e?.toLocaleString()},{title:"Amal",key:"action",width:160,render:(e,T)=>n.jsx(E,{type:"primary",onClick:()=>x(T),children:"Coin yangilash"})}],x=e=>{c(e),r.setFieldsValue({coin:e.coin})},C=e=>{i?.id&&l({id:i.id,coin:e.coin},{onSuccess:()=>{c(null),r.resetFields(),a()}})};return n.jsxs("div",{style:{padding:24},children:[n.jsx(I,{level:2,style:{marginBottom:24},children:"Test Coin Price"}),n.jsx(P,{children:n.jsx(k,{rowKey:"id",columns:h,dataSource:g,loading:s,pagination:!1})}),n.jsx(b,{open:!!i,onCancel:()=>{c(null),r.resetFields()},onOk:()=>r.submit(),confirmLoading:u,title:i?`${i.testType} coin yangilash`:"Coin yangilash",okText:"Yangilash",cancelText:"Bekor qilish",children:n.jsx(d,{form:r,layout:"vertical",onFinish:C,children:n.jsx(d.Item,{name:"coin",label:"Coin",rules:[{required:!0,message:"Coin kiriting"}],children:n.jsx(q,{min:0,style:{width:"100%"},formatter:e=>`${e}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:e=>Number(e.replace(/\$\s?|(,*)/g,""))||0})})})})]})}export{B as default};
